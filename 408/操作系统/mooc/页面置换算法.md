# 页面置换 Swap out

## 概念

地址映射过程中，若在页面中发现所要访问的页面不在内存中，则产生缺页中断。当发生缺页中断时，如果操作系统内存中没有空闲页面，则操作系统必须在内存选择一个页面将其移出内存，以便为即将调入的页面让出空间。而用来选择淘汰哪一页的规则叫做页面置换算法。

## FIFO页面置换

相当于是一个队列。



## MIN

选最远将使用到的页淘汰。



## LRU (Least Recently Used)

选最近一段没有使用的页淘汰。

利用程序的局部性，快表也有这种思想。



## Clock算法 

用来近似LRU算法，因为LRU算法的开销也比较大。

缺页算法。

<img src="https://cdn.jsdelivr.net/gh/yanzhenxing123/blogImg@master/typora202105/01/173208-711360.png" alt="image-20210501173208011" style="zoom:50%;" />

> 问题：当R全部为一时，也就是没有缺页的情况。当缺页时，就会转一圈，将所有的R置为0，然后把第一个R清除掉。

以上问题就相当于执行了一个FIFO算法。

这种问题的原因就在于：记录了太长时间的历史信息，可以用定时清楚R位来解决这个问题。

快指针：用来清除R位，也就是将1置为0.

满指针：用来选择淘汰页。



## 给进程分配多少页框

<img src="https://cdn.jsdelivr.net/gh/yanzhenxing123/blogImg@master/typora202105/01/174304-58512.png" alt="image-20210501174303733" style="zoom:50%;" />