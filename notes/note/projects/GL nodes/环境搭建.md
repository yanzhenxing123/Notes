# 环境搭建

## 安装docker

### 配置阿里云加速

```shell
sudo mkdir -p /etc/docker
sudo tee /etc/docker/daemon.json <<-'EOF'
{
  "registry-mirrors": ["https://r4v3h46x.mirror.aliyuncs.com"]
}
EOF
sudo systemctl daemon-reload
sudo systemctl restart docker
```

## 安装mysql

```shell
sudo docker pull mysql:5.7

# --name指定容器名字 -v目录挂载 -p指定端口映射  -e设置mysql参数 -d后台运行
sudo docker run -p 3306:3306 --name mysql \
-v /mydata/mysql/log:/var/log/mysql \
-v /mydata/mysql/data:/var/lib/mysql \
-v /mydata/mysql/conf:/etc/mysql \
-e MYSQL_ROOT_PASSWORD=root \
-d mysql:5.7
```

-v 进行挂载，相当于快捷方式，可进行查看和挂载

-e 配置

-d 后台运行容器，并返回容器ID；

进入容器

```bash
docker exec -it mysql bin/bash
```

mysql 安装位置

![image-20210531213255939](https://cdn.jsdelivr.net/gh/yanzhenxing123/blogImg@master/typora202105/31/213257-654164.png)

修改配置文件

```shell
docker exec -it mysql bin/bash
exit;

因为有目录映射，所以我们可以直接在镜像外执行
vi /mydata/mysql/conf/my.conf 

[client]
default-character-set=utf8
[mysql]
default-character-set=utf8
[mysqld]
init_connect='SET collation_connection = utf8_unicode_ci'
init_connect='SET NAMES utf8'
character-set-server=utf8
collation-server=utf8_unicode_ci
skip-character-set-client-handshake
skip-name-resolve

保存(注意评论区该配置不对，不是collection而是collation)

docker restart mysql

```



## 安装redis





## 安装nginx

```shell
首先启动一个nginx实例

docker run -p 80:80 --name nginx -d nginx:1.10

复制内容
[root@node168 mydata]# docker container cp nginx:/etc/nginx .



```





## 搭建代码环境

top.yanzx.glmall

谷粒商城-订单服务



### 显示dashboard

[IDEA快速显示Run DashBoard的图文详解_java_脚本之家 (jb51.net)](https://www.jb51.net/article/201751.htm)



## 数据库设计

电商网站不进行外键的设计，因为每一次删除都会扫描外键，百万级数据，是一个非常耗费资源的设计